<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Browse and query the popler database.">
<title>Popler R Package • popler</title>
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png">
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Popler R Package">
<meta property="og:description" content="Browse and query the popler database.">
<meta property="og:image" content="https://docs.ropensci.org/popler/logo.png">
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Matomo --><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css">
<script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js" data-cfasync="false"></script><script src="https://ropensci.org/scripts/matomo.js"></script><noscript><p><img src="https://ropensci.matomo.cloud/matomo.php?idsite=1&amp;rec=1" style="border:0;" alt=""></p></noscript>
<!-- End Matomo Code -->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    <a href="https://ropensci.org" class="external-link"><img src="https://ropensci.org/img/icon_short_white.svg" id="hexlogo" alt="rOpenSci"></a>
    <a class="navbar-brand me-2" href="index.html">popler</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.2.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"></ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="articles/introduction-to-popler.html">Introduction to popler</a>
    <a class="dropdown-item" href="articles/popler-database-structure.html">Popler Database</a>
    <a class="dropdown-item" href="articles/vetting-popler.html">Vetting popler</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="news/index.html">Changelog</a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/ropensci/popler/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9">
<div class="section level1">
<div class="page-header">
<img src="logo.png" class="logo" alt=""><h1 id="popler">Popler<a class="anchor" aria-label="anchor" href="#popler"></a>
</h1>
</div>
<p><code>popler</code> is the R package to browse and query the <code>popler</code> data base. <code>popler</code> is a PostgreSQL data base that contains population-level datasets from the US long term ecological research (LTER) network. This package is currently only available on GitHub, but our ultimate goal is to submit it to CRAN. A detailed explanation on the structure of the <code>popler</code> online database is contained in the <a href="https://github.com/texmiller/popler-ms/blob/master/popler_ms.pdf" class="external-link">dratf of the manuscript presenting popler</a> and in the <a href="https://github.com/AldoCompagnoni/popler/blob/master/vignettes/popler-database-structure.Rmd" class="external-link">dedicated vignette</a>. The <code>popler</code> database is organized around four types of tables:</p>
<p>A. The tables containing information on population abundance. Population abundance can be of five types: count, biomass, cover, density, and at the individual-level.</p>
<p>B. A table containg to link each abundance value to the taxonomic units it refers to. In <code>popler</code>, “taxonomic unit” generally refers to a species.</p>
<p>C. The location of each “site”. With “site” we refers to the largest spatial replicate available for a dataset. Many datasets provide abundance data from more than one site.</p>
<p>D. Metadata information referring to each separate dataset.</p>
<p><img src="articles/img/schema.png" width="1280"></p>
</div>
<div class="section level1">
<h1 id="popler-rationale">Popler rationale<a class="anchor" aria-label="anchor" href="#popler-rationale"></a>
</h1>
<p>The package <code>popler</code> aims to facilitate finding, retrieving, and using time-series data of population abundance associated with the US LTER network. To <em>find datasets</em>, the functions in <code>popler</code> aid in understanding and browsing the metadata information referring to each dataset. To <em>retrieve</em> data, the function <code><a href="reference/pplr_get_data.html">pplr_get_data()</a></code> downloads single datasets or groups of datasets. These downloads share the same data structure. To <em>use</em> downloaded data, the package provides ancillary functions to consult and cite the original data sources, examine the temporal replication of each data set, and methods for a couple of <code>dplyr</code> verbs to assist with data manipulation.</p>
<div class="section level3">
<h3 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h3>
<hr>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Install stable version once on CRAN (hopefully soon!)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">'popler'</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># Install development version now</span></span>
<span><span class="kw">if</span><span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://devtools.r-lib.org/" class="external-link">devtools</a></span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="va">devtools</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">'ropensci/popler'</span><span class="op">)</span></span></code></pre></div>
<p>All exported functions in the <code>popler</code> R package use the <code>pplr_</code> prefix. Moreover, the functions use lazy and/or tidy evaluation, meaning you do not need to manually quote most inputs.</p>
</div>
</div>
<div class="section level1">
<h1 id="finding-datasets">Finding datasets<a class="anchor" aria-label="anchor" href="#finding-datasets"></a>
</h1>
<hr>
<div class="section level5">
<h5 id="dictionary-of-variables">Dictionary of variables<a class="anchor" aria-label="anchor" href="#dictionary-of-variables"></a>
</h5>
<p>We suggest to start exploring the metadata variables describing each dataset in popler using <code><a href="reference/pplr_dictionary.html">pplr_dictionary()</a></code>. This function works in two ways:</p>
<ol style="list-style-type: decimal">
<li>It provides a general description of each metadata variable. This happens when this function is called without arguments; for example, when calling <code><a href="reference/pplr_dictionary.html">pplr_dictionary()</a></code>.</li>
<li>It provides the possible values of its unquoted arguments. For example, when calling <code>pplr_dictionary( proj_metadata_key )</code>.</li>
</ol>
<p>The output of <code><a href="reference/pplr_dictionary.html">pplr_dictionary()</a></code> is a data frame showing a description of each metadata variable.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/popler">popler</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/pplr_dictionary.html">pplr_dictionary</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="do">##             variable</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="do">## 1              title</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="do">## 2  proj_metadata_key</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="do">## 3             lterid</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="do">## 4           datatype</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="do">## 5    structured_data</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="do">## 6          studytype</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="do">## 7     duration_years</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="do">## 8          community</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="do">## 9          structure</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="do">## 10         treatment</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="do">## 11          lat_lter</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="do">## 12          lng_lter</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a><span class="do">## 13           species</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a><span class="do">## 14           kingdom</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a><span class="do">## 15            phylum</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a><span class="do">## 16             class</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a><span class="do">## 17             order</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a><span class="do">## 18            family</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a><span class="do">## 19             genus</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a><span class="do">##                                                description</span></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a><span class="do">## 1                                         title of project</span></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a><span class="do">## 2                                        unique project id</span></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a><span class="do">## 3                                                lter name</span></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a><span class="do">## 4              type of abundance data (e.g. count,biomass)</span></span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a><span class="do">## 5  are abundance observations grouped (e.g. based on age)?</span></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a><span class="do">## 6                     experimental or observational study?</span></span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a><span class="do">## 7                             duration of project in years</span></span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a><span class="do">## 8                     does data set contain multiple taxa?</span></span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a><span class="do">## 9                            types of indidivual structure</span></span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a><span class="do">## 10                                      types of treatment</span></span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a><span class="do">## 11                                      lter site latitude</span></span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a><span class="do">## 12                                     lter site longitude</span></span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a><span class="do">## 13                    specific epithet of a taxonomic unit</span></span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a><span class="do">## 14                                                 kingdom</span></span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a><span class="do">## 15                                                  phylum</span></span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a><span class="do">## 16                                                   class</span></span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a><span class="do">## 17                                                   order</span></span>
<span id="cb3-39"><a href="#cb3-39" aria-hidden="true" tabindex="-1"></a><span class="do">## 18                                                  family</span></span>
<span id="cb3-40"><a href="#cb3-40" aria-hidden="true" tabindex="-1"></a><span class="do">## 19                                                   genus</span></span></code></pre></div>
<p>However, this function is more powerful when used with an argument. When <code><a href="reference/pplr_dictionary.html">pplr_dictionary()</a></code> is provided with the name of a metadata variable, it returns the possible unique values of the variable. For example, providing <code>datatype</code> shows that popler contains five types of abundance data:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/pplr_dictionary.html">pplr_dictionary</a></span><span class="op">(</span> <span class="va">datatype</span> <span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="do">## $`datatype (NA)`</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "individual"  "count"       "cover"       "biomass"     "density"    </span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="do">## [6] "basal_cover"</span></span></code></pre></div>
<p>Additionally, the <code><a href="reference/pplr_report_dictionary.html">pplr_report_dictionary()</a></code> function generates an <code>Rmd</code> file and renders it into html. This html contains both the meaning of variables, and their unique values.</p>
</div>
<div class="section level5">
<h5 id="browsing-popler">Browsing <code>popler</code>
<a class="anchor" aria-label="anchor" href="#browsing-popler"></a>
</h5>
<p>Once you are familiar with the meaning and content of <code>popler</code>’s metadata variables, <code><a href="reference/pplr_browse.html">pplr_browse()</a></code> provides the metadata of the studies contained in <code>popler</code>. <code><a href="reference/pplr_browse.html">pplr_browse()</a></code> also works with and without an input. Without input, the function produces a data frame including the metadata variables describing every study currently contained in the <code>popler</code> database. Note that this data frame is a <code>tbl</code> that inherits from the <code>browse</code> class. Inputs to <code><a href="reference/pplr_browse.html">pplr_browse()</a></code> allow users to subset this data frame (e.g. <code>duration_years &gt; 5</code>). When subsetting, the unique values provided by <code><a href="reference/pplr_dictionary.html">pplr_dictionary()</a></code> are particularly useful. For more nuanced subsetting of available datasets, the <code>keyword</code> argument allows to subset variables using partial matching. Note that <code>keyword</code> will act primarily on information contained in the title of studies.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">all_studies</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/pplr_browse.html">pplr_browse</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># do not quote logical expressions</span></span>
<span><span class="va">long_studies</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/pplr_browse.html">pplr_browse</a></span><span class="op">(</span><span class="va">duration_years</span> <span class="op">&gt;</span> <span class="fl">20</span><span class="op">)</span> </span>
<span></span>
<span><span class="co"># keyword is quoted</span></span>
<span><span class="va">parasite_studies</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/pplr_browse.html">pplr_browse</a></span><span class="op">(</span>keyword <span class="op">=</span> <span class="st">'parasite'</span><span class="op">)</span> </span></code></pre></div>
<p>The default settings of both <code><a href="reference/pplr_browse.html">pplr_browse()</a></code> and <code><a href="reference/pplr_dictionary.html">pplr_dictionary()</a></code> report a subset of the metadata variables contained in popler. To report all variables, set <code>full_tbl = TRUE</code>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#  vars are quoted</span></span>
<span><span class="va">interesting_studies</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/pplr_browse.html">pplr_browse</a></span><span class="op">(</span>vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'duration_years'</span>, <span class="st">'lterid'</span><span class="op">)</span><span class="op">)</span> </span>
<span></span>
<span><span class="co"># Use full_tbl = TRUE to get a table with all possible variables</span></span>
<span><span class="va">all_studies_and_vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/pplr_browse.html">pplr_browse</a></span><span class="op">(</span>full_tbl <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="reporting-metadata">Reporting metadata<a class="anchor" aria-label="anchor" href="#reporting-metadata"></a>
</h5>
<p>You can generate a human-readable report on metadata variables of the projects you subset using <code>pplr_browse</code> by providing the function with the argument <code>report = TRUE</code> . This argument uses <code>rmarkdown</code> to render the metadata into an html file, and opens it into your default browser. Alternatively, you can perform the same action described above by providing the <code>browse</code> object produced calling <code>pplr_browse</code> to the function <code><a href="reference/pplr_report_metadata.html">pplr_report_metadata()</a></code>.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># generate metadata report for all studies</span></span>
<span><span class="fu"><a href="reference/pplr_browse.html">pplr_browse</a></span><span class="op">(</span>report<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co"># alternatively</span></span>
<span><span class="va">all_studies</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/pplr_browse.html">pplr_browse</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/pplr_report_metadata.html">pplr_report_metadata</a></span><span class="op">(</span><span class="va">all_studies</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># generate metadata report for parasite studies</span></span>
<span><span class="fu"><a href="reference/pplr_browse.html">pplr_browse</a></span><span class="op">(</span>keyword <span class="op">=</span> <span class="st">'parasite'</span>, report <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">parasite_studies</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/pplr_browse.html">pplr_browse</a></span><span class="op">(</span>keyword <span class="op">=</span> <span class="st">'parasite'</span><span class="op">)</span> </span>
<span><span class="co"># alternatively</span></span>
<span><span class="fu"><a href="reference/pplr_report_metadata.html">pplr_report_metadata</a></span><span class="op">(</span><span class="va">parasite_studies</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level1">
<h1 id="retrieving-data">Retrieving data<a class="anchor" aria-label="anchor" href="#retrieving-data"></a>
</h1>
<hr>
<p>Once you explored the metadata and decided which projects interest you, it’s time to actually download the data! <code><a href="reference/pplr_get_data.html">pplr_get_data()</a></code> connects to the data base via an API, and downloads the raw data based on the criteria supplied. Alternatively, if you’re happy with the projects represented in the <code>browse</code> object you created earlier, you can simply pass that object to <code><a href="reference/pplr_get_data.html">pplr_get_data()</a></code>. Note that if your <code>browse</code> object contains 5 rows, <code><a href="reference/pplr_get_data.html">pplr_get_data()</a></code> will download 5 separate datasets. All objects created with <code><a href="reference/pplr_get_data.html">pplr_get_data()</a></code> inherit from <code>get_data</code> and <code>data.frame</code> classes.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create a browse object and use it to get data</span></span>
<span></span>
<span><span class="va">penguins</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/pplr_browse.html">pplr_browse</a></span><span class="op">(</span><span class="va">lterid</span> <span class="op">==</span> <span class="st">'PAL'</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># unpack covariates as well</span></span>
<span></span>
<span><span class="va">penguin_raw_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/pplr_get_data.html">pplr_get_data</a></span><span class="op">(</span><span class="va">penguins</span>, cov_unpack <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># A very specific query</span></span>
<span></span>
<span><span class="va">more_raw_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/pplr_get_data.html">pplr_get_data</a></span><span class="op">(</span><span class="op">(</span><span class="va">proj_metadata_key</span> <span class="op">==</span> <span class="fl">43</span> <span class="op">|</span> </span>
<span>                                <span class="va">proj_metadata_key</span> <span class="op">==</span> <span class="fl">25</span><span class="op">)</span> <span class="op">&amp;</span> </span>
<span>                                <span class="va">year</span> <span class="op">&lt;</span> <span class="fl">1995</span> <span class="op">)</span></span></code></pre></div>
</div>
<div class="section level1">
<h1 id="using-data">Using data<a class="anchor" aria-label="anchor" href="#using-data"></a>
</h1>
<hr>
<p>We provide three ancillary functions to facilitate the use of the objects downloaded through <code><a href="reference/pplr_get_data.html">pplr_get_data()</a></code>.</p>
<p>First, <code><a href="reference/pplr_metadata_url.html">pplr_metadata_url()</a></code> opens up a webpage containing study details. Before doing scientific analyses, we urge the users to review the peculiarities of each dataset by vetting their online documentation. Importantly, <code><a href="reference/pplr_metadata_url.html">pplr_metadata_url()</a></code> also works on objects produced by <code>pplr_browse</code>.</p>
<p>Second, <code><a href="reference/pplr_cov_unpack.html">pplr_cov_unpack()</a></code> transforms the data contained in the <code>covariates</code> column of each downloaded dataset into separate columns. This can or cannot be useful depending on the objectives of the user. Note: you can also transform covariates into a data frame directly through <code><a href="reference/pplr_get_data.html">pplr_get_data()</a></code> by providing the function with argument <code>cov_unpack = TRUE</code>.</p>
<p>Third, <code><a href="reference/pplr_citation.html">pplr_citation()</a></code> produces a citation for each downloaded dataset.</p>
<div class="section level5">
<h5 id="spatio-temporal-replication">Spatio-temporal replication<a class="anchor" aria-label="anchor" href="#spatio-temporal-replication"></a>
</h5>
<p>The datasets contained in <code>popler</code> present many heterogeneities, especially in terms of their spatio-temporal replication. Most studies present at least a few spatial replicates which were not sampled every year. Note that most datasets in <code>popler</code> present at least one additional replication level. These spatial replicates are denoted with numbered variables of the form <code>spatial_replication_level_X</code>, where <code>X</code> refers to the replication level which can go from 1 to 5. The names of these replication levels (e.g. plot, subplot, etc.) are contained in variable <code>spatial_replication_level_x_label</code>.</p>
<p>Once you download a dataset, you can examine the temporal replication of the largest spatial replicate (the site, or <code>spatial_replication_level_1</code>) using function <code><a href="reference/pplr_site_rep.html">pplr_site_rep_plot()</a></code>. This function produces a plot showing whether or not a given site was sampled in a year.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># download and plot yearly spatial replication for dataset 1</span></span>
<span><span class="va">kelp_df</span>      <span class="op">&lt;-</span> <span class="fu"><a href="reference/pplr_get_data.html">pplr_get_data</a></span><span class="op">(</span> <span class="va">proj_metadata_key</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/pplr_site_rep.html">pplr_site_rep_plot</a></span><span class="op">(</span> <span class="va">kelp_df</span> <span class="op">)</span></span></code></pre></div>
<p><img src="README_files/figure-markdown_github/spatial_rep_plot-1.png"></p>
<p>Additionally, <code><a href="reference/pplr_site_rep.html">pplr_site_rep()</a></code> produces either a logical vector for subsetting an existing <code>get_data</code> object or a summary table of temporal replication for a given spatial resolution. You can control the minimum frequency of sampling and the minimum duration of sampling using the <code>freq</code> and <code>duration</code> arguments, respectively. Additionally, you can choose the level of spatial replication to filter providing an integer between 1 and 5 to the <code>rep_level</code> argument. <code>return_logical</code> allows you to control what is returned by the function. <code>TRUE</code> returns a logical vector corresponding to rows of the <code>get_data</code> that correspond to spatial replicates that meet the criteria of replication specified in the function. <code>FALSE</code> returns a summary table describing the number of samples per year at the selected spatial resolution.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Example with piping and subsetting w/ the logical vector output</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>SEV_studies <span class="ot">&lt;-</span> <span class="fu">pplr_get_data</span>( lterid <span class="sc">==</span> <span class="st">'SEV'</span> datatype <span class="sc">==</span> <span class="st">'invidual'</span> )</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>long_SEV_studies <span class="ot">&lt;-</span> SEV_studies <span class="sc">%&gt;%</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>  .[<span class="fu">pplr_site_rep</span>(<span class="at">input =</span> .,</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>                  <span class="at">duration =</span> <span class="dv">12</span>,</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>                  <span class="at">rep_level =</span> <span class="dv">3</span>), ] <span class="sc">%&gt;%</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pplr_site_rep_plot</span>()</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Or, create the summary table</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>SEV_summary <span class="ot">&lt;-</span> SEV_studies <span class="sc">%&gt;%</span> </span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pplr_site_rep</span>(<span class="at">duration =</span> <span class="dv">13</span>,</span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>                <span class="at">rep_level =</span> <span class="dv">1</span>,</span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>                <span class="at">return_logical =</span> <span class="cn">FALSE</span>)</span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Modify the site_rep_plot() by hand using ggplot2 syntax</span></span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a><span class="fu">pplr_site_rep_plot</span>(long_SEV_studies, <span class="at">return_plot =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">'Sevilleta LTER Temporal Replication'</span>)</span></code></pre></div>
</div>
<div class="section level5">
<h5 id="data-manipulation">Data manipulation<a class="anchor" aria-label="anchor" href="#data-manipulation"></a>
</h5>
<p><code>popler</code> supplies methods for a couple of <code>dplyr</code> verbs to assist with data manipulation. <code>filter</code> and <code>mutate</code> methods are available for objects of <code>browse</code> and <code>get_data</code> classes. Other <code>dplyr</code> verbs change the structure of the object too much for those classes to retain their meaning so they are not included in the package, but one can still use them for their own purposes.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguins_98</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">penguin_raw_data</span>, <span class="va">year</span> <span class="op">==</span> <span class="fl">1998</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">penguins_98</span><span class="op">)</span> <span class="co"># classes are not stripped from objects</span></span>
<span></span>
<span><span class="va">penguins_98_true</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="va">penguins_98</span>, penguins_are <span class="op">=</span> <span class="st">'Awesome'</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">penguins_98_true</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level1">
<h1 id="further-information">Further information<a class="anchor" aria-label="anchor" href="#further-information"></a>
</h1>
<hr>
<p>Additional information on <code>popler</code> is contained in a manuscript, and in the vignettes associated with the R package.</p>
<p>The <a href="https://github.com/texmiller/popler-ms/blob/master/popler_ms.pdf" class="external-link">manuscript, currently in draft form</a>, presents the <code>popler</code> database, the R package, and our recommendations on how to use them.</p>
<p>The R package contains three vignettes: one vignette <a href="https://github.com/AldoCompagnoni/popler/blob/master/vignettes/popler-database-structure.Rmd" class="external-link">illustrates the structure of the popler database</a>, and two vignettes provide <a href="https://github.com/AldoCompagnoni/popler/blob/master/vignettes/introduction-to-popler.Rmd" class="external-link">an introduction</a> and <a href="https://github.com/AldoCompagnoni/popler/blob/master/vignettes/vetting-popler.Rmd" class="external-link">a more detailed look</a> at the intended workflow of the popler package.</p>
<p>In case these vignettes do not cover your particular use case, you still have questions, or you discover a bug, please don’t hesitate to create an <a href="https://github.com/AldoCompagnoni/popler/issues" class="external-link">issue</a>.</p>
</div>

  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/ropensci/popler/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/ropensci/popler/issues" class="external-link">Report a bug</a></li>
</ul>
</div>



<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="CONTRIBUTING.html">Contributing guide</a></li>
</ul>
</div>

<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing popler</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Compagnoni Aldo <br><small class="roles"> Maintainer, author </small>  </li>
<li>Bibian Andrew <br><small class="roles"> Author </small>  </li>
<li>Ochocki Brad <br><small class="roles"> Author </small>  </li>
<li>Levin Sam <br><small class="roles"> Author </small>  </li>
<li>Miller Tom <br><small class="roles"> Author </small>  </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="software-peer-review">
<h2 data-toc-skip>Software Peer-Review</h2>
<ul class="list-unstyled">
<li><p><a href="https://github.com/ropensci/software-review/issues/254" class="external-link"><img src="https://badges.ropensci.org/254_status.svg" alt="rOpenSci peer-review"></a></p></li>
</ul>
</div>

  </aside>
</div>


    <footer><!-- begin footer --><div class="footer">
    <div class="container">
        <div class="row start top-4 bottom-8">
            <div class="col-2"> <img id="footerlogo" src="https://ropensci.org/img/icon_short_white.svg">
</div>
            <div class="col-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="https://github.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-github"></div></a>
                        <a href="https://github.com/ropenscilabs" target="_blank" class="external-link"><div class="icon fa fa-flask"></div></a>
                        <a href="https://twitter.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-twitter"></div></a>
                        <a href="https://vimeo.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-vimeo"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">About</h5>
                            <li><a href="https://ropensci.org/about" class="external-link">About rOpenSci</a></li>
                            <li><a href="https://ropensci.org/software-review" class="external-link">Software Review</a></li>
                            <li><a href="https://ropensci.org/about#team" class="external-link">Our Team</a></li>
                            <li><a href="https://ropensci.org/careers" class="external-link">Jobs</a></li>
                            <li><a href="https://ropensci.org/donate" class="external-link">Donate</a></li>
                            <li><a href="https://ropensci.org/contact" class="external-link">Contact Us</a></li>
                        </ul>
</div>
                    <div class="col-md-3 col-sm-4">
                        <ul>
<h5 class="bottom-2">Community</h5>
                            <li><a href="https://ropensci.org/community/" class="external-link">Our Community</a></li>
                            <li><a href="https://ropensci.org/commcalls/" class="external-link">Community calls</a></li>
                            <li><a href="https://ropensci.org/events/" class="external-link">Events</a></li>
                            <li><a href="https://discuss.ropensci.org/" class="external-link">Join the Discussion</a></li>
                            <li><a href="https://ropensci.org/code-of-conduct" class="external-link">Code of conduct</a></li>
                        </ul>
</div>
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">Resources</h5>
                            <li><a href="https://ropensci.org/packages/" class="external-link">Packages</a></li>
                            <li><a href="https://ropensci.org/usecases/" class="external-link">Use Cases</a></li>
                            <li><a href="https://ropensci.org/talks-papers/" class="external-link">Talks &amp; Publications</a></li>
                            <li><a href="https://docs.ropensci.org/" class="external-link">Documentation</a></li>
                            <li><a href="https://ropensci.org/news/" class="external-link">Newsletter</a></li>
                            <li><a href="https://ropensci.org/how-to-cite-ropensci/" class="external-link">Cite rOpenSci</a></li>
                        </ul>
</div>
                    <div class="col-md-4 col-xs-12">
                        <h5 class="bottom-2"></h5>

                        <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" class="external-link">NumFOCUS</a>.</p>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->


    </footer>
</div>

  

  

  </body>
</html>
