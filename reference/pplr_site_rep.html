<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Functions to examine the number of temporal replicates 
contained within each spatial replication level of a dataset. 
pplr_site_rep_plot plots the temporal replicates available for 
each site.
pplr_site_rep produces logical vectors that identify the spatial 
replicates with enough temporal replication, or summary tables."><title>Spatial-temporal replication of data sets — pplr_site_rep • popler</title><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Spatial-temporal replication of data sets — pplr_site_rep"><meta property="og:description" content="Functions to examine the number of temporal replicates 
contained within each spatial replication level of a dataset. 
pplr_site_rep_plot plots the temporal replicates available for 
each site.
pplr_site_rep produces logical vectors that identify the spatial 
replicates with enough temporal replication, or summary tables."><meta property="og:image" content="https://docs.ropensci.org/popler/logo.png"><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Matomo --><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css"><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js" data-cfasync="false"></script><script src="https://ropensci.org/scripts/matomo.js"></script><noscript><p><img src="https://ropensci.matomo.cloud/matomo.php?idsite=1&amp;rec=1" style="border:0;" alt=""></p></noscript><!-- End Matomo Code --></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    <a href="https://ropensci.org" class="external-link"><img src="https://ropensci.org/img/icon_short_white.svg" id="hexlogo" alt="rOpenSci"></a>
    <a class="navbar-brand me-2" href="../index.html">popler</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.2.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"></ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/introduction-to-popler.html">Introduction to popler</a>
    <a class="dropdown-item" href="../articles/popler-database-structure.html">Popler Database</a>
    <a class="dropdown-item" href="../articles/vetting-popler.html">Vetting popler</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/ropensci/popler/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Spatial-temporal replication of data sets</h1>
      <small class="dont-index">Source: <a href="https://github.com/ropensci/popler/blob/HEAD/R/site_replication.R" class="external-link"><code>R/site_replication.R</code></a></small>
      <div class="d-none name"><code>pplr_site_rep.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Functions to examine the number of temporal replicates 
contained within each spatial replication level of a dataset. 
<code>pplr_site_rep_plot</code> plots the temporal replicates available for 
each site.
<code>pplr_site_rep</code> produces logical vectors that identify the spatial 
replicates with enough temporal replication, or summary tables.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">pplr_site_rep</span><span class="op">(</span><span class="va">input</span>, freq <span class="op">=</span> <span class="fl">1</span>, duration <span class="op">=</span> <span class="fl">10</span>, rep_level <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  return_logical <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">pplr_site_rep_plot</span><span class="op">(</span><span class="va">input</span>, return_plot <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>input</dt>
<dd><p>An object of produced by <code>pplr_get_data</code>. Note that this
is not an output from <code>pplr_browse</code>, as the raw data is required to 
calculate the amount of replication.</p></dd>


<dt>freq</dt>
<dd><p>A number corresponding to the desired annual frequency of 
replicates. Studies that are replicated more frequently will be 
included in the counts and those that replicated less frequently will be 
excluded. 
If <code>return_logical = TRUE</code>, rows that contain information from sites 
that are replicated at the desired frequency will have a <code>TRUE</code> value, 
and rows that are not will have a <code>FALSE</code> value. 
Values greater than 1 will select sampling done multiple times per year. 
For example, <code>freq = 2</code> indicates a desired sampling frequency of 6
months. Conversely, <code>freq = 0.5</code> indicates a desired sampling done 
once every 2 years.</p></dd>


<dt>duration</dt>
<dd><p>An integer corresponding to the desired number of yearly
replicates. Rows containing site information from sites with more 
replication will be included, while those with less will be excluded.</p></dd>


<dt>rep_level</dt>
<dd><p>An integer corresponding to the level of spatial 
replication over which verify yearly temporal replication. Values between 1 and 5 
are possible (though higher levels may not be present for some datasets). 
Higher values correspond to higher levels of spatial nestedness. 
The default value of <code>rep_level = 1</code> corresponds to sites.</p></dd>


<dt>return_logical</dt>
<dd><p>logical; if <code>TRUE</code>, the function returns a logical
vector. This vector can be used to subset the dataset. If <code>FALSE</code>, the 
function returns a summary table of class <code>tbl</code>. This table shows, in 
variable <code>number_of_samples</code>, how many temporal replicates per year 
are contained by each spatial replicate. Default is <code>TRUE</code>.</p></dd>


<dt>return_plot</dt>
<dd><p>A logical indicating whether to return a copy of the 
<code>input</code> data or the <code>ggplot</code> object created by the function. Use
<code>TRUE</code> to return the <code>ggplot</code> object for subsequent modification.
Use <code>FALSE</code> to return an invisible copy of the <code>input</code> object 
(useful for piping). Default is <code>FALSE</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p><code>pplr_site_rep_plot</code>: <code>input</code> object (invisibly) or a
<code>ggplot2</code> object. Use <code>return_plot</code> to control.</p>


<p><code>pplr_site_rep</code>: A <code>tbl</code> or a logical vector of length 
<code>dim(input)[1]</code>. Use <code>return_logical</code> to control.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p><code>pplr_site_rep_plot</code> produces a scatterplot showing the sites 
(<code>spatial_replication_level_1</code>) and years for which data is available.</p>
<p><code>pplr_site_rep</code> works with any level of spatial replication and produces
either a summary table of temporal replication or a logical vector that can be used 
to subset a data set based on the desired frequency and length of time.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># produce logical vector and subset using it. This can also be piped into a </span></span></span>
<span class="r-in"><span><span class="co"># the plotting function for visiualization</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">good_studies</span> <span class="op">&lt;-</span> <span class="fu"><a href="pplr_get_data.html">pplr_get_data</a></span><span class="op">(</span><span class="va">lterid</span> <span class="op">==</span> <span class="st">'SEV'</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>                   <span class="va">.</span><span class="op">[</span><span class="fu">pplr_site_rep</span><span class="op">(</span>input <span class="op">=</span> <span class="va">.</span>,</span></span>
<span class="r-in"><span>                                   duration <span class="op">=</span> <span class="fl">12</span>, </span></span>
<span class="r-in"><span>                                   rep_level <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>, <span class="op">]</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>                   <span class="fu">pplr_site_rep_plot</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span>                                       </span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Or, make a neat summary table and decide where to go from there</span></span></span>
<span class="r-in"><span><span class="va">SEV</span> <span class="op">&lt;-</span> <span class="fu"><a href="pplr_get_data.html">pplr_get_data</a></span><span class="op">(</span><span class="va">lterid</span> <span class="op">==</span> <span class="st">'SEV'</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">rep_table</span> <span class="op">&lt;-</span> <span class="fu">pplr_site_rep</span><span class="op">(</span>input <span class="op">=</span> <span class="va">SEV</span>,</span></span>
<span class="r-in"><span>                           freq <span class="op">=</span> <span class="fl">0.5</span>,</span></span>
<span class="r-in"><span>                           duration <span class="op">=</span> <span class="fl">12</span>,</span></span>
<span class="r-in"><span>                           return_logical <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span> </span></span>
<span class="r-in"><span><span class="co"># pplr_site_rep_plot ---------------</span></span></span>
<span class="r-in"><span>                                                     </span></span>
<span class="r-in"><span><span class="co"># create an unmodified figure</span></span></span>
<span class="r-in"><span><span class="va">BNZ</span> <span class="op">&lt;-</span> <span class="fu"><a href="pplr_get_data.html">pplr_get_data</a></span><span class="op">(</span><span class="va">lterid</span> <span class="op">==</span> <span class="st">'BNZ'</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">pplr_site_rep_plot</span><span class="op">(</span><span class="va">BNZ</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Return the figure instead of the data for subsequent modification</span></span></span>
<span class="r-in"><span><span class="va">Antarctica</span> <span class="op">&lt;-</span> <span class="fu"><a href="pplr_get_data.html">pplr_get_data</a></span><span class="op">(</span><span class="va">lterid</span> <span class="op">==</span> <span class="st">'PAL'</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">pplr_site_rep_plot</span><span class="op">(</span><span class="va">Antarctica</span>,</span></span>
<span class="r-in"><span>              return_plot <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">+</span> </span></span>
<span class="r-in"><span>   <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ggtitle</a></span><span class="op">(</span><span class="st">"Penguins Rock!"</span><span class="op">)</span></span></span>
<span class="r-in"><span>   </span></span>
<span class="r-in"><span><span class="co"># Use within pipes. Cannot return and modify the figure this way.</span></span></span>
<span class="r-in"><span><span class="fu"><a href="pplr_get_data.html">pplr_get_data</a></span><span class="op">(</span><span class="va">lterid</span> <span class="op">==</span> <span class="st">'SEV'</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span></span>
<span class="r-in"><span>  <span class="fu">pplr_site_rep_plot</span><span class="op">(</span>return_plot <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="pplr_report_metadata.html">pplr_report_metadata</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><!-- begin footer --><div class="footer">
    <div class="container">
        <div class="row start top-4 bottom-8">
            <div class="col-2"> <img id="footerlogo" src="https://ropensci.org/img/icon_short_white.svg"></div>
            <div class="col-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="https://github.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-github"></div></a>
                        <a href="https://github.com/ropenscilabs" target="_blank" class="external-link"><div class="icon fa fa-flask"></div></a>
                        <a href="https://twitter.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-twitter"></div></a>
                        <a href="https://vimeo.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-vimeo"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul><h5 class="bottom-2">About</h5>
                            <li><a href="https://ropensci.org/about" class="external-link">About rOpenSci</a></li>
                            <li><a href="https://ropensci.org/software-review" class="external-link">Software Review</a></li>
                            <li><a href="https://ropensci.org/about#team" class="external-link">Our Team</a></li>
                            <li><a href="https://ropensci.org/careers" class="external-link">Jobs</a></li>
                            <li><a href="https://ropensci.org/donate" class="external-link">Donate</a></li>
                            <li><a href="https://ropensci.org/contact" class="external-link">Contact Us</a></li>
                        </ul></div>
                    <div class="col-md-3 col-sm-4">
                        <ul><h5 class="bottom-2">Community</h5>
                            <li><a href="https://ropensci.org/community/" class="external-link">Our Community</a></li>
                            <li><a href="https://ropensci.org/commcalls/" class="external-link">Community calls</a></li>
                            <li><a href="https://ropensci.org/events/" class="external-link">Events</a></li>
                            <li><a href="https://discuss.ropensci.org/" class="external-link">Join the Discussion</a></li>
                            <li><a href="https://ropensci.org/code-of-conduct" class="external-link">Code of conduct</a></li>
                        </ul></div>
                    <div class="col-md-2 col-sm-4">
                        <ul><h5 class="bottom-2">Resources</h5>
                            <li><a href="https://ropensci.org/packages/" class="external-link">Packages</a></li>
                            <li><a href="https://ropensci.org/usecases/" class="external-link">Use Cases</a></li>
                            <li><a href="https://ropensci.org/talks-papers/" class="external-link">Talks &amp; Publications</a></li>
                            <li><a href="https://docs.ropensci.org/" class="external-link">Documentation</a></li>
                            <li><a href="https://ropensci.org/news/" class="external-link">Newsletter</a></li>
                            <li><a href="https://ropensci.org/how-to-cite-ropensci/" class="external-link">Cite rOpenSci</a></li>
                        </ul></div>
                    <div class="col-md-4 col-xs-12">
                        <h5 class="bottom-2"></h5>

                        <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" class="external-link">NumFOCUS</a>.</p>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->


    </footer></div>

  

  

  </body></html>

